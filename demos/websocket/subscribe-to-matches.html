<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Websockets - Subscribe to matches</title>
    <!-- YOU NEED TO UPDATE THE AUTHORIZATION TOKEN WITH THE ONE IN YOUR FREE TRIAL PAGE -->
    <script src="https://apiv1.esports-data-provider.com:1350/js/dependencies/sails.io.js" environment="production" headers='{ "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXvcj9.eyJpc3MiOiJodHRwczovL2VkcC5ldS5hdxromc5jb20viiwic3viijoinmtun0r2t0huy0tvs29omnuxsentq2hyr1owwgnwqklay2xpzw50cyisimf1zci6imh0dhbzoi8vyxbpdjeuzxnwb3j0cy1kyxrhlxbyb3zpzgvylmnvbsisimlhdci6mtyxmjg4njm4ocwizxhwijoxnjeyotc2mzg4lcjhenaioii2a1q3rhzpsg5js29lb2gydtfiq1ndahjhwjbyy3bcssisinnjb3blijoic2tpcdpyyxrlmtugbgl2ztpvdmvyd2f0y2ggcmvzddpvdmvyd2f0y2ggbgl2ztpkb3rhihjlc3q6zg90ysbsaxzlomxvbcbyzxn0omxvbcbsaxzlomnzz28gcmvzddpjc2dviiwiz3r5ijoiy2xpzw50lwnyzwrlbnrpywxzin0.W7J23cGGBzPWU5igboZ_w1SUXQVLvlB6a7rpuj55ee0" }'></script>
    <script type="text/javascript">
        io.sails.url = 'https://apiv1.esports-data-provider.com:1350';

        //Subscribe to all matches update
        io.socket.post('/subscribeToMatches', {}, function responseFromServer(body, response) {
            console.log("The server responded with status " + response.statusCode + " and said: ", body);
        });
        
        //Subscribe to a specific match
        io.socket.post('/subscribeToMatch', {match_id:4998}, function responseFromServer(body, response) {
            console.log("The server responded with status " + response.statusCode + " and said: ", body);
        });
        

        //Watch the matches and react accordingly
        io.socket.on('match', function(event) {

            switch (event.verb) {
                case "updated": 
                    //This is what interest you, every time a match is updated, you will know about it
                    console.log(event.data);
                    break;
                    
                case "created":
                    //A new match has been created, might be useful
                    console.log(event.data);
                    break;
            }

        });
    </script>
</head>

<body>
    <h1>Do not forget to update the Authorization token in the script tag.</h1>
    <h2>Then look out for the console.log(), updates will be displayed</h2>
</body>

</html>
